<div class="accounts small-12 large-9 large-centered columns">
  <div class="list small-4 columns">
    <ul class="panel side-nav">
      <li ng-repeat="a in accounts" ng-class="{active: account.id == a.id}">
        <a href="#/configuration/accounts?id={{ a.id }}">{{ a.name }}</a>
      </li>
    </ul>

    <div class="actions">
      <div class="actions-left">
        <button class="refresh ladda-button tiny secondary"
                data-style="zoom-out"
                data-spinner-color="#333333"
                data-spinner-size="24"
                title="Refresh accounts"
                ng-click="refresh()"
          >
          <span class="ladda-label">
            <i class="fi-refresh"></i>
          </span>
        </button>
      </div>
      <div class="actions-right">
        <co-button-input class="create" callback="create" placeholder="Name" title="Create account">
          <i class="fi-plus"></i>
        </co-button-input>
      </div>
    </div>
  </div>

  <div class="options small-8 columns">
    <div class="row">
      <div class="title small-5 large-7 columns">
        <h5>{{ account.name }}</h5>
      </div>
      <div class="actions small-7 large-5 columns">
        <button class="refresh ladda-button tiny secondary"
                data-style="zoom-out"
                data-spinner-color="#333333"
                data-spinner-size="24"
                title="Refresh options"
                ng-click="accountRefresh()"
          >
          <span class="ladda-label">
            <i class="fi-refresh"></i>
          </span>
        </button>
        <button class="discard ladda-button tiny secondary"
                data-style="zoom-out"
                data-spinner-color="#333333"
                data-spinner-size="24"
                title="Discard changes"
                ng-click="accountDiscard()"
          >
          <span class="ladda-label">
            <i class="fi-trash"></i>
          </span>
        </button>
        <button class="save ladda-button tiny"
                data-style="zoom-out"
                data-spinner-color="#FFFFFF"
                data-spinner-size="24"
                title="Save changes"
                ng-click="accountSave()"
          >
          <span class="ladda-label">
            <i class="fi-save"></i>
          </span>
        </button>
      </div>
    </div>

    <div class="authentication group" ng-show="account">
      <div class="row header">
        <div class="small-8 large-10 columns">
          <h5>Authentication</h5>
        </div>
      </div>

      <tabset>
        <tab heading="Trakt" data-valid="{{ account.trakt.authorization.valid }}">
          <accordion close-others="true">
            <accordion-group heading="OAuth" data-valid="{{ account.trakt.authorization.oauth.valid }}" is-open="true">
              <label for="trakt.oauth.code">Authentication PIN</label>
              <input id="trakt.oauth.code" type="password" ng-model="account.trakt.authorization.oauth.code" />
            </accordion-group>
            <accordion-group heading="Basic" data-valid="{{ account.trakt.authorization.basic.valid }}">
              <label for="trakt.basic.username">Username</label>
              <input id="trakt.basic.username" type="text" ng-model="account.trakt.authorization.basic.username" />

              <label for="trakt.basic.password">Password</label>
              <input id="trakt.basic.password" type="password" ng-model="account.trakt.authorization.basic.password" />
            </accordion-group>
          </accordion>
        </tab>
        <tab heading="Plex" data-valid="{{ account.plex.authorization.valid }}">
          <accordion close-others="true">
            <accordion-group heading="Basic" data-valid="{{ account.plex.authorization.basic.valid }}" is-open="true">
              <label for="plex.basic.username">Username</label>
              <input id="plex.basic.username" type="text" ng-model="account.plex.authorization.basic.username" />

              <label for="plex.basic.password">Password</label>
              <input id="plex.basic.password" type="password" ng-model="account.plex.authorization.basic.password" />
            </accordion-group>
          </accordion>
        </tab>
      </tabset>
    </div>

    <div class="group" ng-repeat="(key, group) in account.options.groups">
      <div class="row header">
        <div class="small-8 large-10 columns">
          <h5>{{ group.name }}</h5>
        </div>

        <div class="switch small-4 large-2 columns" ng-show="group.enabled">
          <input id="{{ group.enabled.key }}" type="checkbox" ng-model="group.enabled.value">
          <label for="{{ group.enabled.key }}"></label>
        </div>
      </div>

      <div class="row group-options">
        <co-option class="columns" ng-repeat="option in group.options" option="option" ></co-option>
      </div>

      <div class="sub-group row">
        <div class="columns" ng-repeat="(key, group) in group.groups">
          <div class="row header">
            <div class="small-12 columns">
              <h6>{{ group.name }}</h6>
            </div>
          </div>

          <div class="row group-options">
            <co-option class="columns" ng-repeat="option in group.options" option="option" ></co-option>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
