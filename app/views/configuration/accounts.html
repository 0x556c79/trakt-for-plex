<div class="accounts small-12 large-9 large-centered columns">
  <div class="list small-4 columns">
    <ul class="panel side-nav">
      <li ng-repeat="a in accounts" ng-class="{active: account.id == a.id}">
        <a href="#/configuration/accounts?id={{ a.id }}">{{ a.name }}</a>
      </li>
    </ul>
  </div>

  <div class="options small-8 columns">
    <div class="row">
      <div class="title small-5 large-7 columns">
        <h5>{{ account.name }}</h5>
      </div>
      <div class="actions small-7 large-5 columns" ng-show="account">
        <button class="tiny secondary" title="Refresh options"><i class="fi-refresh"></i></button>
        <button class="tiny secondary" title="Discard changes"><i class="fi-trash"></i></button>
        <button class="tiny" title="Save changes"><i class="fi-save"></i></button>
      </div>
    </div>

    <div class="authentication group">
      <div class="row header">
        <div class="small-8 large-10 columns">
          <h5>Authentication</h5>
        </div>
      </div>

      <tabset>
        <tab heading="trakt" data-valid="{{ account.trakt.authorization.valid }}">
          <accordion close-others="true">
            <accordion-group heading="OAuth" data-valid="{{ account.trakt.authorization.oauth.valid }}" is-open="true">
              <label>Authentication PIN
                <input type="password" ng-model="account.trakt.authorization.oauth.code" />
              </label>
            </accordion-group>
            <accordion-group heading="Basic" data-valid="{{ account.trakt.authorization.basic.valid }}">
              <label>Username
                <input type="text" ng-model="account.trakt.authorization.basic.username" />
              </label>
              <label>Password
                <input type="password" ng-model="account.trakt.authorization.basic.password" />
              </label>
            </accordion-group>
          </accordion>
        </tab>
        <tab heading="plex" data-valid="{{ account.plex.authorization.valid }}">
          <accordion close-others="true">
            <accordion-group heading="Basic" data-valid="{{ account.plex.authorization.basic.valid }}" is-open="true">
              <label>Username
                <input type="text" ng-model="account.plex.authorization.basic.username" />
              </label>
              <label>Password
                <input type="password" ng-model="account.plex.authorization.basic.password" />
              </label>
            </accordion-group>
          </accordion>
        </tab>
      </tabset>
    </div>

    <div class="group" ng-repeat="(key, group) in account.preferences">
      <div class="row header">
        <div class="small-8 large-10 columns">
          <h5>{{ group.name }}</h5>
        </div>

        <div class="switch small-4 large-2 columns" ng-show="group.enabled">
          <input id="{{ group.enabled.key }}" type="checkbox">
          <label for="{{ group.enabled.key }}"></label>
        </div>
      </div>

      <div class="row group-options">
        <co-option class="columns" ng-repeat="option in group.options" option="option" ></co-option>
      </div>

      <div class="sub-group row">
        <div class="columns" ng-repeat="(key, group) in group.groups">
          <div class="row header">
            <div class="small-12 columns">
              <h6>{{ group.name }}</h6>
            </div>
          </div>

          <div class="row group-options">
            <co-option class="columns" ng-repeat="option in group.options" option="option" ></co-option>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
